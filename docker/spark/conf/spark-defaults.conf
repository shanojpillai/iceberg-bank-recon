# Spark configuration for Iceberg

# Spark executor settings
spark.executor.memory 2g
spark.executor.cores 2
spark.driver.memory 2g

# Iceberg catalog configuration
spark.sql.extensions org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions
spark.sql.catalog.spark_catalog org.apache.iceberg.spark.SparkSessionCatalog
spark.sql.catalog.spark_catalog.type hive

# Local catalog for development
spark.sql.catalog.local org.apache.iceberg.spark.SparkCatalog
spark.sql.catalog.local.type hadoop
spark.sql.catalog.local.warehouse s3a://warehouse/

# PostgreSQL catalog for production
spark.sql.catalog.postgres org.apache.iceberg.spark.SparkCatalog
spark.sql.catalog.postgres.type jdbc
spark.sql.catalog.postgres.uri jdbc:postgresql://postgres:5432/iceberg_catalog
spark.sql.catalog.postgres.warehouse s3a://warehouse/
spark.sql.catalog.postgres.jdbc.user iceberg
spark.sql.catalog.postgres.jdbc.password iceberg

# S3 configuration for MinIO
spark.hadoop.fs.s3a.endpoint http://minio:9000
spark.hadoop.fs.s3a.access.key minio
spark.hadoop.fs.s3a.secret.key minio123
spark.hadoop.fs.s3a.path.style.access true
spark.hadoop.fs.s3a.impl org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.connection.ssl.enabled false

# Default catalog
spark.sql.defaultCatalog local
